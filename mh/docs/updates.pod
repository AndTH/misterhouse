
=pod

=head1 Mister House Announcement List

- This is a copy of the mh update announcements made to MisterHouse mailing list (an archive of all the list 
messages is at http://www.onelist.com/archives.cgi/misterhouse )

=head2 mh ver 1.?? posted on 01/??/00

Version 1.9?? was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Updated internet_slashdot.pl.

- mp3 stuff/search

- receive extended x10 data.  garage code.

- Added a said method to File_Item. 
This allows us to easily monitor the tail end of log files.
See shoutcast.pl for an example.

- Updated mh/code/Bruce/shoutcast.pl so it can be used with the newer, web based
shoutcast servers.  This code will announce when you have new listeners to your broadcasts.


Bug Fixes and Minor Changes:

- Fixed the {a,b,c} enumeration problem on web category lists.

- Fixed the CM11 group set method so items are left in the correct state, rather than none.

- Fixed the DNS lookup in monitor_server.pl.  It always said 'web access from unknown',
even if you had the mh.ini DNS parm enabled.


=head2 mh ver 1.93 posted on 01/05/00

Version 1.93 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Changed Voice_Text to allow for calls David L.'s new ViaVoice Outloud TTS
server for Linux.  David has an rpm and a tarball, with installation documention, at:
http://dittos.penguinpowered.com/automation/index.html#software

- Added mh/code/test/stocks.pl.  This will use Yahoo to look up stock data
for the symbols listed in the new mh.ini stock parm.
All it does now is pop up a Tk window and update a Tk widget with last
prices and change data.  This could be exended to do logging, alerts, charts, etc.

- Added a Tk Code Search option to mh_control.pl.  This can be used to quickly find which
objects and/or variables are in which code files.  It pops up a Tk window that shows 
which code files the specified string is found in.

- Added "List X10 Items" and "List serial items" to mh_control.pl.  These will display
an sorted list of your items, so you can easily review what is assigned to what.

- If you are using an CM11, the Group object will now control all X10 
devices simultaneously, rather than sequentially. 
Thanks Nic Brink for pointing out this option.

- Allow for the Voice_Cmd state to be in the response field with either of the following:

  $v_fan = new Voice_Cmd 'Fan [on,off]',
           'Ok, I turned the fan $v_indoor_fountain->{said}';
 
  $v_fan = new Voice_Cmd 'Fan [on,off]',
           'Ok, I turned the fan %STATE%';


Bug Fixes and Minor Changes:

- Fixed the time_now problem with "12:xx AM" tests that Brent J. found.

- Fixed the 100 -> 00 date display problem on the Tk windows.

- Added Ron Wrights drop down box updates to get_tv_grid.

- Added Nic Brink's mh/code/public/cd_player.pl code (for linux).

- Created $Date_Now_Speakable, complements of Amaury J.

- Added mh/code/public/send_alpha_page.pl from David L.
It uses a linux program called bip to send pages.

- Bill B. updated CM11.pm to an official CPAN 2.06 version (extended data added).

- William S. found a bug in trivia.pl

- Fixed a bug with mh_server processing mhsend -run commands.

- Added File_Item read_all, read_head, and read_tail methods.

- Added numbers to the FAQ questions.  Added a "What are the advantages/disadvantages to the 
compiled vesions of mh" question.


=head2 mh ver 1.90 posted on 12/12/99

Version 1.90 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Craig S. added mh/lib/RCS_Item.pm and mh/code/public/rcs.pl, to allow for control
of the RCS TX thermostats.

- Added the option for internet_mail.pl to run commands via email.  
To test it, fill in the new mh.ini net_mail_command_code, then run
'send test e mail', then a little later 'list new e mail'.
See mh/docs/faq.html question 'Can do I send mh comands via email?' for
more info.  Thanks to Chris H. for this idea!

- Added mh/bin/outlook_read and mh/code/Bruce/outlook.pl.  This code will
read events from Outlook '97, '98, or 2000 calendars and create a mh code file.
The subject of the calendar entry can be "VCR CH# Show name", "voice_cmd_to_run",
or "message to speak".  Run outlook_read -help for more info.

- Added &Voice_Cmd::said_this_pass and &Voice_Cmd::noise_this_pass so we can get 
better feedback from the viavoice VR engine.  See mh/code/Bruce/lcdproc.pl 
for an example, where I use an LCD to display if a command or noise was detected.
Other minor changes to viavoice_control.pl

- Added a 'find a command' function to viavoice_control.pl.  This lets speak 
a word or two of and have mh return a list of all commands that match those words.

- Added an html log to tracking_bruce.pl.  Check out where our cars
have been at http://misterhouse.net:8080/aprs

- Enabled Bright/Dim, and +-##% when using the X10 Weeder kit interface

- Added mh.ini date_format parm, so you can pick US mm/dd/yy or non-US dd/mm/yy.
You can also choose 2 year yy or 4 year yyyy formats.

- Took out hard coded small fonts and put in more html_style mh.ini parms (e.g. html_style_tk).


Bug Fixes and Minor Changes:

- Fixed a http server problem where Netscape would sometimes say 'Document contains no data'.

- Allow mh.ini parm html_default to be a list of possible default files, rather
than just one (e.g. index.html,index.shtml).

- Return a web Error page for unrecognized web requests.

- Return 'not authorized' if someone tries to access web files above the root web directory.

- Added $New_Week, like $New_Day, $New_Month etc.

- Added file_cat so we can concatonate data from one file to another.

- Fixed "What is your uptime?" in mh_control.pl, for linux users.

- Fixed 2 recently introduced log related bugs with display_callers.

- Allow for blanks before and after the = in mh.ini files.


- Allow for mh objects to be declared without () around the new argument. Either 
of these are now allowed:

  $test1 = new Voice_Cmd "Test 1";
  $test1 = new Voice_Cmd("Test 1");

Along with this change, mh now requires objects declarations (e.g. new Voice_Cmd)
to start in column 1-3.  This is consistant with global 'my' variables. 
Unfortunatly, this may break 
some code that used to have global objects that were indented.  For example, 
several objects in the old test_stuff.pl were that way.  

I debated this change for some time, but it seems better to be consistant. 
I could see problems with pulling out any/all objects (e.g. eliza object in speak_server.pl).
I can get talked out of it if this is a problem for someone.

=head2 mh ver 1.89 posted on 11/20/99

Version 1.89 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Added HomeVision support, complements of Ingo Dean.  Set the Homevision_port mh.ini parm
to enable.  Check mh/code/public/test_homevision.pl for example code.

- Upgraded viavoice_server to V2.0 SDK.  Added instructions in install.html on how to 
install viavoice SDK (available free from IBM, for linux only).

- Added 3 new Voice_Cmd options:  $response, $confirm, $vocabulary.  These are currently
only used if you are using the viavoice engine, which currently is only available 
on linux (you linux guys now have a leg up!).  We might be able to add these
new options to the MS VR engine, but I'm not convinced the current MS VR engine is 
accurate enough to justify the effort.   If you have a linux box running on your 
network, you can use the viavoice_server from your windows mh (which is what I am doing).
Another option is maybe we can compile a version of viavoice_server for Wwindows, but
that would not be free.  I think IBM sells their windows version of viavoice for around $100.

- Created mh/code/Bruce/viavoice_control.pl.  Using this, you can switch between
'awake', 'asleep', and 'off' modes.  Added a bunch of viavoice_* parms to mh.ini
so you can personalize how these modes work.


Bug Fixes and Minor Changes:

- Added an -hour option to get_tv_grid, so you can specify grid times other than the
default of 4 hours. 

- Added -size and -type options to report_weblog.  Change -type default from gif to 
png.  I am a little late to the 'burn all gifs' party!

- Added a check for an html browser, before displaying the help text.

- Changed the 3rd argument to logit to be the &time_date_stamp format used.
The default is unchanged 14 (e.g. Mon 04/14/99 14:28:00).

- Fixed a bug with the new set_with_timer option added last to X10_Item.

- Added mh.ini sound_program parm.  If you are on linux and to not have a sound card
or do not want sound files played, set this to blank.  

- Drop 50 frow/o + from X10_Items.


=head2 mh ver 1.87 posted on 11/07/99

Version 1.87 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Added the option to interface to a viavoice_server Voice Recognition server running on linux.
The server (complements of Michael Flaster) currently requires the V1.0 SDK installed.  The V2.0 SDK
was just release and probably requires a different executable, so unless you really want to be
bleeding edge, you probably want to wait till Michael and I get the new version up.  Mike, 
I'll send you a seperate note on how to enable mh to use it and what works and what doesn't.

- Added Voice_Cmd 'phrase enumeration' with {} (e.g. {tell me the time,what time is it}).
Unlike the existing 'state enumeration' with [] (e.g. [on,off]), you can
have as many phrase enumeration groups as you want.  Examples are in mh.html and in 
http://misterhouse.net/mh/code/examples/Voice_Cmd_enumeration.pl .

- Extended X10 Preset Dim commands are now supported, if you have the CM11 interface and a compatible (LM14A) module.
You can send them directly, like XA1&P64 (set unit A1 to Preset level 64), or use the new X10_Item ##% state.
Examples are in http://misterhouse.net/mh/code/examples/x10_preset_dim.pl .  Also look for "Preset Dim" in mh.html.

- Added a set_with_timer X10_Item and X10_Appliance method.  This idea is complements of Craig.  Examples are in mh.html.

- Added $Reread.  This is true on the first pass after a Reload(F1) request.  Unlike $Reload 
which is is true only if one or more code members changed, $Reread is always true on a Reload request.
Using $Reread, you can create events to quickly re-read input
files without restarting mh (e.g. the tracking.pl position file). 

- Added mh.ini time_format=24 option, for our non-US buddies.


Bug Fixes and Minor Changes:

- Moved X10_xx items from Serial_Item.pm to X10_Items.pm.

- Allow for X10_Item brighten levels to work without the '+' sign (e.g. 50 instead of +50).

- Fixed a mh.exe bug with get_url ('port not specified' message).

- Fixed a recent bug that caused Serial_Item not to start after being stopped.

- Fixed a get_weather bug where conditions were not always retreived.

- Used the mh.ini data_dir in get_tv_info, instead of the hardcoded mh/data.

- Closed an file handle in Display.

- Added code/public/weather from Ernie O.

- Added code/Bruce/tracking_bruce.pl.  This is a subset of Brian's mh/public/Brian/tracking.pl code that 
just does GPS tracking.

- Renamed the convert_wind_direction to convert_direction (since we can use it in the gps tracking code also).

- Updated to the latest version of Geo::WeatherNOAA.pm, used by get_weather.

- Changed time/date format of logit (uses 24 hour time and includes seconds and year).
If anyone wants the old format back, let me know and we can put in an option.

- renamed file_change to file_changed (and granfathered in old name) and added file_unchanged.


=head2 mh ver 1.83 posted on 10/09/99

Version 1.83 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Added mh.ini password_protect=all option.  If this is used, and mh/bin/set_password has
been run, none of the mh web pages will be displayed unless you have entered the password.

- Added mh.ini max_log_entries, to control how many entries are shown in the web print and speak logs.

- Updated the FireCracker CM17.pm module to allow for numeric bright/dim (e.g. "set light to +50").
As noted in the mailing list earlier this week, the CM17 only supports one DIM and BRIGHT command,
so we have to run a loop in CM17.pm.  Each CM17 command takes about 1 second, and it takes 7 DIM/BRIGHTS
to cover the whole range, so a +95 will cause mh to pause for about 7 seconds.

- Updated mh/code/Bruce/phone.pl and mh/bin/display_callers so they search mh.ini caller_id_file data also.


Bug Fixes and Minor Changes:

- Re-fixed the DB_file compile bug in handy_utilites, introduced in 1.82.

- Updated Serial_Item.pm so it works with mh/code/public/rcstx15.pl again.

- Fixed test on zero length xcmd_files.

- Fixed a bug in time_date_stamp format 13.

- Added dbm_read function, for reading just one record from a dbm.

- Added mh/code/public/Nick.  This is the code we set up for my son Nick's room.  

- Refreshed CM11.pm and CM17.pm to from CPAN and moved from mh/lib/site/HomeAutomation to mh/lib/site/ControlX10.


=head2 mh ver 1.82 posted on 10/02/99

Version 1.82 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Added X10_Item interface field, so you can specify if which X10 device you want to use to control that item.

- Allow for serial port sharing.  For example, you can put the CM11 and CM17 (ActiveHome and FireCracker)
interfaces on the same port. 

- Changed logit_dbm and display_callers from SDBM_file to DB_file.  This is a more reliable DBM storage format.
If you have been using display_callers or have your own DB file that used the logit_dbm function, you will
need to convert to the new format using http://misterhouse.net/public/dbm_sdbm_to_db

- Added a search_dbm function.  Updated mh/code/Bruce/phone.pl and mh/bin/display_callers to use it.
Using this, we can quickly search for the phone number of anyone who has ever called us, using a part of their
name or phone number (e.g. area code).


Bug Fixes and Minor Changes:

- Updated mh/phone/phone.area_codes.txt (thanks Bill!)

- Exposed CallerID.pm names and states arrays.

- Fixed 'use lib' with mh.exe bug in get_tv_grid and set_password.

- Fixed a bug with the file 'copy' function when run from mh.exe

- Changed file_change to return undef when first called.  So it returns 1 if the 
file has changed, 0 if it has unchanged, and undef it we don't know (because mh just started).

- Minor bug fix in processing of a get_email_rule.pl rule.

- Updated mh.exe to latest Activestate build (520)

- The new release of ActiveState perl, build 520, has a new function for 
volume control:  Win32::Sound::Volume($left, $right).  So those of you with that build
or those using mh.exe can try this function.  I found it didn't work as 
documented ( http://www.activestate.com/ActivePerl/docs/lib/site/Win32/Sound.html )
Looks to me like the sound range is from 0 to 255), and it would always zero out 
the right channel.  If we can get this to work, we can add in a volume_stub to speak
so we can support different volume levels.


=head2 mh ver 1.79 posted on 09/26/99

Version 1.79 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Buffer incoming X10 data so that multi-keyed events can be processed,
one keystroke per pass.  For more info, see the mailing list thread  "missed" X10 signals.

- Added mhsend and mhsend_server.pl.  These are a more flexible replacement for the speak_server.pl code.
They allow you to send data to mh over the intra/internet.  Data can be logged, filed, spoken, displayed,
or run.  Password authorization is the same as for web pages.

- Added -mail_to option to get_tv_grid.  If specified (see http://misterhouse.net/mh/code/test/tv_grid.pl for an example),
it will email the default tv web page so you can have the current TV schedule in your html 
compatible inbox.

- Allow control of Reload and Error sounds in mh.ini.

- Added sound_dir to mh.ini, so you can point to your own directory of wav files.

- Added sendkeys_find_window.  It adds the option of starting a program if its window is
not found.  See mh.html or http://misterhouse.net/mh/code/test/internet_mail.pl

- Another example of how to use SendKeys to send/receive mail 
with Outlook and Outlook Express in mh/code/test/internet_mail.pl

- Add mh.ini password_allow_clients parm so we can specify intranet boxes that do not
require password protection.



Bug Fixes and Minor Changes:

- Added a note on the Windows 98 DCOM update to install.html and faq.html.

- Added 2 missing .gifs to the TV web pages.  Re-enabled the detailed program discriptions
from the clicktv site.  Unfortunatly, I'm not sure how to get the Javascript popup windows re-enabled.
The web pages I download do not use PDetail javascript subroutine.

- Enabled the get_tv_grid -label option.  Default it to <img src="/tv/vcr.jpg">

- Fixed a bug where web pages would keep waiting when running events that do not respond with spoken or displayed data.

- Fixed the 'command not found' bug that Bill B. noticed at startup.  

- Added a check for bad data in code/mh_temp.saved_states.

- Fixed a bug where web links to commands with _ in them would not work.

- Changed set_password, set_clock, get_tv_grid, get_weather, 
and display_calls to use the new mh.ini data_dir and html_dir parms.

- Save state of debug flag between code reloads.


=head2 mh ver 1.77 posted on 09/17/99

Version 1.77 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

New Features:

- Added Socket_Item is_available and set_port methods, so we can have mh make sure various
socket ports are up (see http://misterhouse.net/mh/code/Bruce/monitor_mh.pl for an example).
Don't tell the 'script kiddies' about it or they will use it as a port scanner.

- On Windows, there are two new functions that can be used for controlling other applications.  
WaitForAnyWindow and SendKeys are new functions exported from a perl module called Win32::Setupsup.
Full documentation is in mh/lib/site/Win32/Setupsup.html, but most of what you need to know can
be gleaned from the function descriptions in mh.html.  Examples can be found in 
http://misterhouse.net/mh/code/test/ members 
mp3_control and  test_stuff.pl (tests o and p)



Bug Fixes, small changes:

- Fixed the CM17 bug that Bill B. found.  Also moved CM11.pm to the lib/site/HomeAutomation/X10 directory.

- Fixed a bug where blanks in '# Category=my category' directives messed up web pages listings.

- Changed the Tk Command menu items so it will not list empty groups.


=head2 mh ver 1.75 posted on 09/12/99

Version 1.75 was just uploaded to:

  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html
  http://misterhouse.net/mh (for unziped, individual files)

Here is what's changed:

- Added a data_dir parm, and renamed html_root to html_dir (html_root will still work).  As outlined at the
top of mh.ini, changing code_dir, data_dir, and web_dir should be enough to keep your files seperate from 
the mh distribution, for easier upgrades.

- Changed the mh/web/mh_chaz and mh/web/mh2.  Renamed the old page from mh_default to mh1.  You
can play/change with the different web pages by pointing to:

  http://localhost:8080/mh_chaz 
  http://localhost:8080/mh1
  http://localhost:8080/mh2

Or you can edit your mh.ini html_dir parm and hit Reload, then refresh your browser window.

mh2 is a combination of the old mh1 interface with some of the nifty new stuff that Charles has in 
mh_chaz.  Thanks to Charles for his expert web work!

- Added mp3_control.pl for controlling mp3 songs.  On Windows it uses wactrl.exe from David Kindred.  
We should be able to find a linux player we can control from the command line in a similar way.  If
not we can compile the new perl MP3 module.

- Improved, but didn't fully fix the memory lead on Reload problem.  I (painfully) tracked this 
down to a Tk Menu problem and the perl Tk author is taking a look at it.
Until that is fixed, if you are doing frequent code reloads, you may want to turn off the pull down menus
by editing the 3 tk_* parms in your mh.ini or run with:

   mh -tk_items 0 -tk_commands 0 tk_groups 0

Items uses the most memory, so just turning that one off will probably be enough.  On my box with -tk_items 0, mh leaks about
200k per reload, it costs me 2 meg per 10 reloads.  

- Added mh/docs/faq.html (and faq.txt).  Added/changed a few items from when it was first posted a few weeks ago.

- Added $Holiday.  See mh.ini holiday_dates parm.  

- Added mh.ini html_style option.  Use this to change mh web pages colors and fonts.

- Added mh/bin/alpha_page from Craig S.

- Some more homebase updates.  Bob and I are closing in on getting this working.

- Some SerialPort and CM17/CM11 updates.  Bill B. is kindly going through all the work to preparing the
CM17/CM11 modules for eventual upload to a new perl CPAN HomeAutomation::X10 directory.

- Updated get_tv_grid to work with the new click.tv pages.  It now also deletes old shows from the dbm database.

- mh/web/mh_default/test bar graphs were pointing to the wrong directory, so the color from the one dot gif did not show.

- Changed the Reload and Error sounds to use mh/sound/sound_click1 and sound_beep1.


=head2 mh ver 1.71 posted on 08/29/99

Version 1.71 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html

Here is what's changed:

- Added support for 4x20 LCD interface with keypad.  I've just started using it, but this looks
like it will be a really handy, inexpensive ($100) way to query/display mh data.  See mh/code/Bruce/lcdproc.pl
and/or the hardware section of mh.html for more information.

- Added support for the $30 IRman receiver.  mh/code/Bruce/irman.pl shows how to program a database
for your IR, and how to set a Generic_Item that you can then use to trigger events in any code
member.  See irman.pl and/or mh.html for more info.

- Added support for .pl web files.  Like 'cgi' programs, this allows us to generate html on the fly,
that reflects the status of various mh items.  For a few examples, try 
http://misterhouse.net:8080/mh_default/test/test_stuff.shtml .  Brian K. has another example in
mh/web/examples/statuspanel.pl

- Added set_dtr set_rts methods to Serial_Item.  See irman.pl for an example.

- Added a Process_Item set method, so the Process_Item program and/or arguments can be set/changed
after mh startup.  See mh/code/Bruce/reports.pl and/or mh.html for an example.

- Fixed the Log(F5) option, so it correctly toggles on and off.  Useful if you want to turn logging
on for just a bit, then turn it off again.

- Fixed get_email and display_callers so they work when mh.private.ini is pointed to with ENV var mh_parms.

- Disabled Serial_Item state_now results for the first few passes after startup.  This way we can 
initialize Serial Items at startup and not get false triggers.

- Added mh/code/test/startup_msg.pl to give a few pointers to first time mh users.

- I just noticed a resource leak when doing code reloads.  About 6% of windows resources (per the Win98 resource meter)
on each reload!  I'm suspect this bug has been with us a for a few releases.  I'll try to fix it next time round.  Till
then, best restart mh about every 10 reloads or so.

- More Homebase.pm debug.  Bob, I'll send a seperate note to you on this.


=head2 mh ver 1.69 posted on 08/01/99

Version 1.69 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html

Heres what's changed:

- Fixed the run bug that Craig found, introduced in 1.68.

- Added status option.  For those with CM11 and the newer, smarter, more expensive queriable X10 modules
(e.g. PLM21 lamp module).  Now you can send periodic 'set $my_light STATUS' and it will set the state
of the item, so you can account for manual control of lights.  Thanks to Brandon for starting the work on this one!


=head2 mh ver 1.68 posted on 07/31/99

Version 1.68 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html

Heres what's changed:

- Some new HomeBase subroutines to test.  Bob, copy mh/code/Bruce/test_homebase.pl into your code dir
and try the various tests.  I have very little confidence in any of them, but they should give us a place
to start debuging.  The documentation I have is very poor, so if you can dig up anything better,
that would help.  

- Added html_reponse method last_displayed (see previous posts and/or mh.html).  

- Added Charles javascript to the mh/web/mh_default/category.shtml.  The only example that uses it is the
'deep thought' button.

- Added mh.ini allow_password_file and mh/data/password_allow.  This gives those of us who password protect
our web pages (with mh/bin/set_password) the option of allowing specific command and/or items to not 
be password protected.  For example, anyone can click on the 'display the next deep though' on my web page
at http://misterhouse.net:8080 

- Bill B. updated Device/SerialPort.pm so should now load OK even on Unix boxes without the proper .ph files.

- Added some new small sounds in mh/sounds.  mh will now bypass logging the wave file name in the speak
log if the name of the file starts with sound_*.   These are ment to be short, frequent sounds.

- Added mh/code/test/monitor_server.pl.  This code will make a clicking sound whenever anyone hits on the
misterhouse web server.  It also can announce new clients.  There is also a new local_addresses mh.ini parm
so this code can distinguish between local hits and external hits.

- Added mh/bin/monitor_weblog, which does the same sort of monitoring as above, but it monitors an Apache
server log, rather than the MisterHouse web server.  This can run on a different box, as it passes the
hit info to MisterHouse via the speak_server port.

- Added mh/bin/report_weblog, and mh/code/Bruce/reports.pl.   This code generates gif graphs that reflect
how many hits and clients Apache and/or Misterhouse logs shows.  It can optionally email the graphs.
  For an example of the graphs, check out:  http://misterhouse.net/report_weblog.html

- Added a mh.ini browser parm and enabled the tk Help button (brings up mh.html).

- Log files now include startup info (e.g. program version).

- Added mh/bin/test_cm* scripts for testing CM11 (Activehome) and CM17 (Firecracker) X10 interfaces
stand alone, without mh.

- Fix a bug that disabled the DOS console controls. 

- Fixed a bug with run if the full pathname to the program was specified.


=head2 mh ver 1.65 posted on 07/22/99

Version 1.65 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html

Heres what's changed:

- Enabled the Firecracker CM17 interface on both Unix and Windows.  Much thanks to Bill Birthisel for his 
efforts in updating the SerialPort modules!  If you know of someone who wants cheap one-way (transmitting) control
with X10, they can still get the $6 deal at http://www.x10.com/free_fire.htm  The "offer ends at midnight" is the standard
X10 ploy which typically last for months.  Also handy if you want wireless control from a laptop (it transmits commands
to an RF receiver).

- If you have password protection on (i.e. you have run the mh/bin/set_password program), the web speak log and print_log
files will now require authorization.  You can change it back to allowing anyone to view those logs by blanking out the 
new mh.ini password_protect option.

- You can now use 'server side include' directives in your web html, to allow better control of the mh generated lists.
Charles, this wasn't exactly the function you asked for, but I thought it would us more control and be more secure
than allowing functions to be passed in via the url name.  If you still see benefit in what you originally asked for,
or think of something else useful as you design your mh web page, let me know.   See the 'include file' string in 
mh_default/category.html and/or the mh.html docs for an example.  Note: the files must have a .shtml extension for this to work.

- Moved the default web files from mh/web/mh to mh/web/mh_default.  As before, you can create your own web files and point
to them with mh.ini html_* parms.

- Added a state method to voice_cmd (see previous post to this list and/or the mh.html doc).

- Created mh/code/Bruce/shoutcast.pl to monitor the coming and going of listeners to any shoutcast server you have 
a password for.  Shoutcast servers (available on many platforms from http://shoutcast.com) stream live audio from 
winamp players.  I often have one running at my house if you want to stop by and say hello at http://misterhouse.net/speak/
Using my microphone, I can respond to any comments you might type in.

- Made the debug messages in HomeBase.pm conditional.

- Speed up the processing of unbuffered socket data.  Telnet sessions to mh (telnet localhost 1234) are now much faster.

- Fixed a SET_VAR bug with strings that had blanks in them (introduced in 1.63).

- Fixed a get_tv_grid bug where it would mess up the 'set the vcr' name for the show.


=head2 mh ver 1.63 posted on 07/05/99

Version 1.63 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html

Guess who stayed home over the 4th :)

Two really nifty new functions with this version.  A 'chatbot' speak server, and 
a searchable TV database.  I also finished the mh.html document.

Here is the detailed list:

- Modifed get_tv_grid to create DBM database files of TV show times and content.

- Added get_tv_info to query the tv DBM files.   After visting the clicktv.com site
and personalizing your listing, update clicktv_id in your mh.private.ini with your id.
Then create/update your databse by running something like:

    get_tv_grid -hour all -days 2
  
  If you already have been running this, you can use the mh/web/tv/clicktv 
  files already downloaded and quickly update the database with:

    get_tv_grid -hour all -days 2 -redo

  You can then run a test search with something like this:

    get_tv_info -channels 4
    get_tv_info -keys dilbert

  Now you can search the database using the voice commands or 
  tk entry widget setup by mh/test/tv_info.pl.

- The get_tv_* programs use the DB_File DBM, rather than the built in SDBM_File DBM.  The good news is that
DB_File works (SDBM_File has a bug under windows and is in general slow and flaky).
The bad news it is not installed by default.  Those
of you who are not running the compiled versions of mh will need to run:

  On windows:  ppm install DB_file

  On unix:       > perl -MCPAN -eshell
             cpan> install DB_file


- Modified speak_server.pl.  You can how used it to process HTML FORM data directly,
without a real web server.   It is seperate server from the mh http server (on a different
port), so you can control authentication on it differently.  You can password
protect the rest of the mh web server functions, but allow people to talk to you 
via the net without a password.  For an example, come say hello to us at:

    http://misterhouse.net:8080/speak/index.html

To enable this, copy speak_server.pl to your code dir, edit mh/web/speak/speak.html to point your IP
address (localhost will work also) and match the port with the entry in mh.ini (the default 
is now 8082) and then point your browser to:

    http://localhost:8080/speak/index.html

This also has a 'ChatBot' option, so you can program your house to talk back :)   The rules are in 
mh/data/eliza/*.txt.

- I finally finished filling in the blanks for all the Items, Variables, Functions, and 
Companion Programs in the mh.html/mh.txt documents.  I'm sure the description of much
of mh still leaves much to be desired, but its a start and it has plenty of examples.


- Allow for a simple mode of calling the play function.  Also included a sample wav file
( try 'How do you pronounce MisterHouse' from mh/test/hello_play.pl).  Changed the default 
so that the play process will fork under linux (i.e. mh does not wait for 
sound file to finish playing).

- Added more smarts to the net_domain_name function.  See mh.html for details and examples.

- Move html_escape function into the http server, so you no longer need to call it to clean
up html SET_VAR results.

- Fixed the get_tv_grid Copy.PM proglem and added a -label option so you can change 
'Set the VCR' to whatever html you want.

- Updated CM11.pm so that when it resets after a power fail, it sends
the correct time, rather than a bogus 0 time.

- Fixed a bug in the file_head function.

- Added a flag option to the File_Item set_watch method (used in code/test/tv_info.pl).

- Added a %Tk_results hash, so we can use Tk entry items better.  See tk_entry in mh.html for details.

=head2 mh ver 1.61 posted on 06/27/99

Version 1.61 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html

Here is a list of this months changes:

- Fixed a bug where various files were not allowed to be changed while mh was running (forgot to close some file handles).

- Fixed a bug where X10 Appliance states were not saved.

- Fixed a bug that caused a timer action to be duplicated, if the timer was reset.

- Include File::Copy so get_tv_grid works for everyone.

- Allow for multiple DNS servers.

- Added &html_unescape function, to decode HTML FORM data.  Here is an example:

  if ($Save{web_text1}) {
      my $msg = "Internet message: " . &html_unescape($Save{web_text1});
      speak $msg;
      &display($msg, 120, 'webcam text'); # 120 seconds till autoclose
      $Save{web_text1} = ''; 
  }
  
- Fixed it so the compiled versions no longer have to be started from the mh/bin directory.

- Allow for a mh_parms enviromental variable.  See the mh.ini header for examples on syntax.
This allows you to have your 'mh.private.ini' file wherever you want. 
If you also specify the mh.private.ini code_dir parm, you should be able to 
keep all of your personalized mh stuff seperate from the standard distribution.  Hopfully this will 
make upgrading as simple as unziping the new distribution.

- Added a 'state' link on the default 'By Object Type' section of the web page.  This allows you to view
the current state of various items.  This is less noisy than the normal list that shows all possible states.

- Added support for the new CM17 X10 interface (aka firecracker).  Not very useful, as it Currently only works on Windows,
it is slow (2-3 seconds per command), and it is transmit only.  But it is cheap :) ($6 from x10.com).

- Modified the syntax of the optional html_response directive for the RUN, SET, and SET_VAR html commands.
Also added the option of having the html reponse be a user defined function.  See mh.html for more info.

- Moved Brian K's code from mh/code/public to mh/code/public/Brian.  Added Mike's webcam code.
I'd be happy to distribute any other code, for those brave enough :)

=head2 mh ver 1.58 posted on 06/20/99

Version 1.58 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html

Here is a list of this months changes:

- Fix uptime on linux (was counting down, thanks Matt!).

- Fixed a get_tickcount problem that caused uptime to count down after 25 days on windows (thanks Craig!).
Windows still has the problem of rolling over its counter after 49 days.

- Fix 'data=165' CM11 problem that Matt found.  The documentation said you had to download a macro
to turn off this power-fail indicator, but that did not work.  Reseting the CM11 clock, however, does the trick.

- Store the IP address of clients.  For example, the address from the last 
web access is in $Socket_Ports{http}{client_ip_address}.

- Added the DNS_server mh.ini parm and the &net_domain_name function. This allows us to look up the
domain name of any IP address.

- Allow for different html responses to the html RUN and SET commands.  The response can be a string, contents of a file,
or the last spokent text.  For example:

  <li><a href=http://localhost:8080/RUN?WebCam_light_brighten?test/test3.html> +50</a>

will return the contents of mh/web/test/test3.html after running the command 'WebCam light brighten'.
See 'Customizing the Web Interface' section of mh.html for more examples.

- Allow for setting of variables directly from html. 
This allows us to specify web widgets indpendently of tk widgets.  For example:

  <FORM ACTION="SET_VAR">Test 1:<INPUT SIZE=5 NAME="$Save{test_input1}"</form>

- Change the debug flag.  It now indicates the category of debug, rather than just everything on or off.  For
example, set debug to serial to see serial port debug.

- Took blanks out of the timer categories string, so they work on from the web interface.

- Changed web page so it only list categories that have commands (i.e. empty categores will not be listed).

- Changed how the new TV schedule is loaded in tv_grid.pl.  The old read_user_code method would sometimes cause a perl abend.

=head2 mh ver 1.56 posted on 05/30/99

Version 1.56 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html
  http://misterhouse.net/house/programs/index.html

Here is a list of this months changes:

- Got a new domain name!  misterhouse.net.  Thanks to Jon for helping me set this up.  This is via
a cable modem to a linux box in my house.  It has a limited upload data rate, so you probably want to
download large files from one of the other 3 servers.

- The files are packaged differently now.  A mh_src_156, mh_win_156, and mh_linux_156.   Everyone will want
the mh_src_156 file.  The other 2 files contain only the compiled files, required for those who do
not have perl installed.  The compiled linux version
is new, but other than an error on exiting, seems to be working OK.

- Fix a get_email bug that caused it to re-announce old, unreceived email as new email.  Also 
changed get_email so it will not list blank names, as filtered by get_email_rule.pl

- Cleaned up some net_mail_login errata.

- Updated mh.exe to SerialPort 0.15, Tk to 8.014, and perl to 5.005_003 build 517.

- Added a check that freezes the current time, if the system clock was set back in time.  mh keeps processing real time
events, but it will not re-trigger timed events.  When the real time catches up to the time mh was at, normal mode resumes.
This fixes the problem of events re-triggering after a call to set_clock, where the pc clock was adjusted back in time.

- Added -time_start, -time_stop, and time_increment options.  This allows you to debug time events in a simulated fast mode.
For example, the following will simulate one days worth of events (takes about 3 minutes on my box), with a default 
of -time_increment 60 (60 seconds per loop).  There are more examples in mh.html.

    mh -time_start 0 -time_stop 24 -voice_text 0

- Fixed Cpu Used %, uptime, and loops per second meters for linux users.  Also added 'Memory Used' 
(only for linux ... I don't know how to do that for windows).  Never guess who has finially gotten
his linux box up and running and has been reading proc manpages :)

- Added web widgets.  All the tk_xxx widgets (except the tk_button widget)
 will be echoed to a 'widgets' frame.  The default html file, mh\web\mh\index_1.html
has been modified to include this frame.

- Added an index in the mh/code/public/README.txt, and added 2 examples on how to send pages using a modem from Brian and Jeff
and Brian's house code, which includes examples on how to run Winamp.

- Added test_stuff.pl.  Try entering 'a', 'b', 'c', ... etc in the 'Test 1' Tk widget field to run these tests.
The idea is that you can easily test a chunk of code by adding another elseif section.

- Added a generic tk_entry, inspired by Charles wakeup_time tk widget.  When running test_stuff.pl, try
entering 'g' on the tk 'Test input 1' for a demo, and watch the tk 'Test out' widget for the results.

- Allow mh.ini tk_geometry updates on Reload.  This was working before, but was broken in a recent release.

- Documented time_* functions, and Serial_Item  a bit more. 



=head2 mh ver 1.54 posted on 04/27/99

Version 1.54 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html

- Fix the 'killing run process' errata on mh exit (Craig S. bug # 1).

- Fix a bug where mh would exit if a process_item was re-started before a previous process for that item had
finished (Craig S. bug # 2).

- Play a wav file only once on linux (thanks to Kevin P. for that fix).

- Added tk_checkbutton widget (see docs and/or tk_widgets.pl for an example).

- Allow for house code (one character) X10_Items.  These translate to ALL_ON and ALL_OFF commands.  

- Change the mult-X10 event check, so it checks for 2 and 4 character X10 events.

- Decode and store incomming CM11 dim/bright codes.  You can set up Serial_Items to trigger off of the dim 
amount.  This also fixes the Craig S. bug # 3 he found in mh 1.52.

- Switched to the latest version of the Serial_Port.pm code.  SerialPort_Linux.pm renamed to SerialPort.pm.

- mh.exe is built with the latest version of perl (5.005_03 build 515).  I don't think this causes
any noticble changes or fixes anything in mh, but it is 'the latest and greatest' :)

- Add a -cgi option to display_callers, so it can be called from a web server.  Not fully implemented yet.

- A http server log is created for each month, in the data/logs directory.

- Turn on command buffering when using -log, so the log is always up to date.

- Allow for unlimited number of server#_ports

- Add server_name_buffer parm, so you can allow for buffered socket ports.

- Add server_speak example to mh.ini, and code/test.  You can use this to pass text to speak into mh
via a socket port.  An example is in the speak.cgi script, which can be called by a perl enabled 
web server and/or tested with the speak.cgi.bat script.


=head2 mh ver 1.51 posted on 03/27/99

Version 1.51 was just uploaded to:

  http://members.home.net/winters/house/programs/index.html
  http://www.geocities.com/ResearchTriangle/Lab/5514/index.html
  http://misterhouse.webjump.com/index.html

Once again, a ton of changes/fixes/updates:

- Yet one last fix to time_now.  It now correctly handles day boundaries with offsets.

- Fixed the 'said $serial_object' method so it no longer drops records.

- Fixed the web authentication so it works with IE 3.0 and IE 5.0.

- Fixed the Process_Item hang on exit problem!  For those of you who are into gory details,
I discovered that you can not kill unfinished .BAT files (command.com) Win32::Processes, but
kill works fine on other programs (e.g. no kill on get_url.bat, but we CAN kill 'mh.exe -run get_url' 
or 'perl get_url').  So, I put in code that bypasses most bat files when called with Process_Item.
If anyone still gets a hang on exit, note the names of the unfinished processes it was trying to kill.

- Moved the 'check email' function from get_internet_mail.pl into a stand alone get_mail script.  This allows
us to call get_mail with a Process_Item and not have mh hang when checking email.

- Added a &net_ping function and use it in the functions called by get_mail, so it doesn't waste much time
on trying to get to in-accessable mail accounts.

- Fixed a bug in phone display_callers script so it can be called from mh with 'do' rather than 'run' (much faster).

- Completely changed how the tk windows are created.  You can now customize the tk windows by modifying the 
tk_frame.pl and tk_widgets.pl members.  Details are in the 'customizing the Tk interface' section of mh.html.

- Added a tk mail flag widget to code/Bruce/internet_mail.pl so you can see how much mail is in various mailboxes.

- Added code/Bruce/tk_eye.pl.  This adds one of those nifty 'live eye' type displays to the menu bar, so you can visually see
mh running.  It also has a 'opps, I fell asleep' checks in it, so we can log when mh gets hung up on something.  Should
be much less frequent now that get_mail is forked.

- Added code/bruce/weather_wx200.pl.  This code parses the data from a WX200 or WM918 weather station. 
$200->$300 from Radio Shack and other places, it does indoor/outdoor temp, humidity, barom. pressure, and wind speed/dir.
Also added some tk widgets to code/Bruce/weather_monitor.pl.

- Fixed bux on speak "rooms=all $text" when $text was muli-lined.

- Rename the temp files in the code dir from -*- to mh_temp.* (e.g. mh_temp.user_code).

- Added a file_head, file_tail, file_read, and file_write functions (see mh.html).

- Added a log_format option to logit (see mh.html).

- Added a serial#_datatype mh.ini parm.  A datatype of 'raw' allows mh to better process binary datastreams.

- Added mhl.bat (dos users) and mhl (unix users).  The 'l' suffix is for loop.
These shells loop if mh had a non-normal exit, so mh will be restarted if it somehow accidentally dies.


Next up ... I'm not sure.  Guess we will find out in a few weeks :)  


=head2 mh ver 1.46 posted on 03/12/99

Version 1.46 was just uploaded to:

  http://members.home.net/winters/house/programs
  http://misterhouse.webjump.com/
  http://www.geocities.com/ResearchTriangle/Lab/5514/

Lots of changes:

- Fixed the XD1DJ -vs- XD1 XDJ problem.  mh will now break up XD1DJ into XD1 XDJ and form XD1 XDJ into XD1DJ. 
It decides to break or merge by looking at what events are defined.  See code/examples/x10_multievent_tests.pl  for an example.
Note, the later (forming seperate stirngs into one event) occurs over a 5 second window,
so you can use this to create multi-key X10 keypad events.  

- Simulate incoming serial data from Tk cmd window or xcmd file (e.g. type house XA1AJ  to turn on X10 light A1)

- Fixed get_tv_grid so it will refresh old (last month's) data.

- Fixed the typo in get_url and allowed it to work with proxies.

- Fixed the 'Charles bug', where mh would hang when transmiting commands (like C1 DIM-30) that had a checksum
that matched the X10 'data to send' string 0xa5.  Also limit the number of times we loop through the retry code.

- Fixed the 'Craig bug' in str2time that messed up time arithmetic with minutes :08 and :09 because
they looked like illegal octal numbers (e.g. time_now("11:08 + 0:01").  Also added
more error checking so it is clear when there is a problem.

- Fixed the 'Craig2 bug' in time_now where it would not trigger if mh was busy doing something else (like 
an internet mail check) on a minute boundary.  I checked all the other time related tests and it looked
like this was the only one that was broken.

- Fixed the 'Craig3 bug' where state_now was not turned on when mh was sending serial item states.

- mh IS exposed to the 49.7 day bug (2**32 milliseconds) that has been in the news lately: 
http://www.news.com/News/Item/0,4,33117,00.html?st.ne.ni.rel .
If you manage to keep windows running for that long, mh should be restarted.  As a quick fix, I just put in a 
'better restart' warning if uptime > 48 days.  If windows ever gets reliable to stay up that long, I'll put in a better fix.
Hmmm, now that we are running on linux as well, I should give this some more serious thought :)

- Seperated the timer_kitchen code into seconds, minutes, and hours members for better control and more 
managable menus.  Complements of Lee McLaren.  Also changed the seconds timer as an example of how
to use local objects, so we
can easily create simultaneous timers.  The down side to this is that these timers are not saved between
reloads, since all local objects are destroyed.  Because of this, I left the minutes and hours timers
as global, so they are 'one at a time, but saved' timers.

- Added a mh.ini seasons parm so our southern buddies can be backwards :)  Also put in the standard dates
for season changeover.  On the average, it is right, but it will be off by a day every once and a while.
If anyone has forumlas for equinox and/or 'phase of the moon' calculations, let me know.

- Documented mh.ini time_zone and longitude parms better (should always both be positive).

- Added a mh.ini option to save the my 'process ID' to a file, so you can easily send mh signals (like 'reload code').

- Updated the uptime and %cpu used indicators so they work under linux.

- Reset window size/position on reload only if the mh.ini tk_geometry parm was changed.

- Modified internet_mail.pl so it can check for multiple email accounts.  See mh.ini on how
to define as many accounts as you want.

- Added Serial_Item methods stop, start, is_stopped, and is_available.  See mh.html and/or code/examples/serial_port_examples.pl.
Brian had the good idea of trying to share a dial out modem with mh caller-id monitoring function.  Hopefully these new
methods will enable that.

- Brian K. added code/public/phone_callerid.pl.  It will allow your internet/data modem to also be used by mh
for callerid function.  Brian is still working on it, but it mostly works.

- Included the display_callers program.  This tk window will display outgoing and incoming phone info.  Incoming as logged by callerid code
(see Brian's code for a modem example and bruce/code/phone.pl for a weeder callerid kit example) and outgoing call monitoring
(see bruce/code/phone.pl, which uses the weeder phone tone monitoring kit).

- Allow for more than 2 generic serial ports.  Defined as many serial#_ mh.ini parms as you want.  Also, if the port
is in use when mh is started, you can use 'start $serial_item' to start it later after the port frees up.

- Errors on code reloads will put relevent errata to a tk popup.  With -tk 0, it will remain in the console where it has
always been.  Unfortunatly, this error errata is not always useful/relevant, but it is sometimes useful.

- Added a 'mode' option to speak, so you can force speech even if mh is in mute or offline mode.  See speak section
of mh.html and code/test/mh_control.pl $mh_mode as an example (it toggles between modes with an X10 keypush)

Unfixed bugs:

- I tried to fix the 'hang after bye bye' on exit problem, but no luck.  It is caused by a 'get_url' Process_Item
that does not finish.  The time-out feature does not work on Windows, nor does the 'process kill' function.  Not 
a problem on linux, where killing things is easy.


Next up, programable Tk widgets.  I know, thats what I said last time ... this time I mean it :)

=head2 mh ver 1.42 posted on 02/26/99

Version 1.42 was just uploaded to:

  http://misterhouse.webjump.com/
  http://www.geocities.com/ResearchTriangle/Lab/5514/


- The SerialPort abend with the 1.40 compiled mh.exe is fixed.  I messed it up for just the compiled version when
I added some debug for the HomeBase.pm code.  I also added some more errata so it is clearer where the problem
is if this type of problem happens again.

- The memory leak problem is fixed.   It occured only if you were lucky enough to put a tab character in the
wrong place in object add records.

- The web server will now default to being not authorized.

- The get_url program was changed so that it will now timeout after 2 minutes.  If mh was exited and
a get_url process had not finished, perl was SUPPOSED to kill the process, but I had problem with it
waiting for get_url to finish (which it sometimes never would).   It would be better if the 'kill on exit'
worked, but allowing it to time out is at least a bit better than hanging on exit.



=head2 mh ver 1.40 posted on 02/20/99

- The web page can now (optionally) require password authentication to function, like the telnet.pl server does.
See the mh.html Authentication section for more details.

- Allow search commands to also match on filenames

- Added new Group item.  Thanks to Craig for this suggestion!  This shows up on both the Tk menu and the web interface.
See mh.html and code/test/test_x10.pl for examples.

- Added a Tk items menu.  If you have many items, this can slow the mh startup down a by a few seconds and add 
another Meg to the mh memory useage, so I made this menu optional.  If you don't think you will use
this menu much, you may want to set tk_items=0 in mh.private.ini file.

- code/public/tracking.pl now is configurable with parms in the mh.ini.  This code is for anyone with a ham radio
receiver and a 'tnc' (radio modem).  It tracks, logs, announces radio annoucements, weather data, and gps
position data.  Those with a ham licence can add a gps unit to your car and have your house track and announce
where you are!  I just got my ham licence :)   Thanks to Brian for writing this one!

- Added bin/get_slashdot_news program and code/test/internet_slashdot.pl.  This gets/displays/reads the most
recent news titles from the popular slashdot.com web site.  Thanks to David for writing this one!

- Added a Process_Item object.  This allows mh to start and stop a detached program.  Most importantly, it also
allows my to test for when the detached program is finished.  On Windows systems, the Win32::Process
function is used, on Unix the fork function is used.  In either case, the mh methods are the same.  See
internet_slashdot.pl and 'get top 10 list' in internet_data.pl for examples.

- Added get_url command, so we can get use Process_Item to get any internet web page in a background process.  
See "get top 10 list" in internet_data.pl for an example.

- Added the global $Reload and $OS_win variables.  $Reload is true for the event pass after a 'reload code'
event.  It is also true when $Startup is true, when mh is first started. 

- Fixed a bug where the initial Tk Cmd list would not respond to a double-click


I didn't get the customizable Tk widgets added yet.  Also, I couldn't find any way to play compressed
wave files on linux, so I didn't include any wav files.  Uncompressed wav files are just too big.


=head2 mh ver 1.35 posted on 02/07/99

Version 1.35 was just uploaded to http://www.isl.net/~winter/house/programs and http://misterhouse.webjump.com. 
Here are the package files:

 - http://freehosting.at.webjump.com/mi/misterhouse-webjump/mh_135.zip
 - http://freehosting.at.webjump.com/mi/misterhouse-webjump/mh_135e.zip

 - http://www.geocities.com/ResearchTriangle/Lab/5514/mh_135.zip
 - http://www.geocities.com/ResearchTriangle/Lab/5514/mh_135e.zip


In my haste to turn off non-debug serial port write print_log errata, I also turned off the serial port writes!

If you happened to be un-lucky enough to have just downloaded 1.34, you can get it to work by
turning debug on.  

Honestly, I DID test this code, on linux, windows, and compiled windows.  I just forgot to test serial port output :)


=head2 mh ver 1.34 posted on 02/07/99

Version 1.34 was just uploaded to http://www.isl.net/~winter/house/programs and http://misterhouse.webjump.com

Changes include:

- Added the 'search string' function to the web pages.

- Fixed tk Command menu so it is reset on reload, rather than added to.

- Added filename to all the Tk and web item lists

- Added a mh -run option, so the compiled mh.exe can be used to run any arbitrary perl script from 
the command line.  Changed get_weather.bat, set_clock.bat, get_tv_grid.bat, and set_password.bat to use this, so they
can now be called stand alone from a DOS shell, even if you do not have perl installed.
This also lets us detatch these processes from mh events, so 
mh does not hang, waiting for them to finish.  The tv_grid.pl event and internet_data.pl get_weather calls 
now do this.

- Added and documented File_Item methods 'name', 'set_watch', and 'changed'.  See the 
'Get internet weather data' for an
example.  This allows mh to respond to the detatched get_weather process after it is finished.

- Fixed a bug where an active timer would get cloned on a code reload.

- Added mh.ini parm tk_geometry so you can control size and position of the mh tk window

- Change the default to log serial IO to the log window only if debug is on.  If people would rather see this
on by default let me know.  Maybe we should set a debug level, and thus have better control over this.

- Added some info on system requirements to README.html

Looking for ideas on what to put in the 'this space for rent' section of the tk menu.  Right now a 
'print_msg "hi there"' will add an entry, but that I'm not sure we need that in addition to the print_log 
and speak log windows.


=head2 mh update 02/04/99 version 1.32

Version 1.32 was just uploaded to http://www.isl.net/~winter/house/programs and http://misterhouse.webjump.com

Changes include:

- Fixed the Windows OLE calls, so they work better.  Thanks to Walley for helping with this!  No more ghost DDE and OLEmain windows!!

- Fixed the Tk bug on Windows where you could not press buttons.  The Shortcut keys still do not work :(

- Added a Tk menu pull down with all the voice commands.  Also allow the Tk command entry to do a string match to list all
voice commands that match whatever string (e.g. try typing: time).

- Added a mh.ini delay_speak parm.  Wally, try setting this to 500 or so (.5 seconds) to see if we can get your 1/2 duplex sound card
not to que up speech after VR.  You should see "Sleeping for xxx ms" in your mh console, after doing VR that requires speech.

- Fixed 'bad time record: time=' on startup.

- Fixed internet.pl to it reports non-Rochester forecast.  Thanks Craig!

- Fixed 'duplicate socket item' message.

- Fixed display so it will run stand alone, if perl is installed.

- Added an code/example directory.  Keep those code snippets comming!

- Fixed the web path so all the example interfaces work (index_1.html, index_2.html, index_3.html).

- Fixed a typo in tv_grid.pl, so PM is not added to all times

- Allow telnet.pl to run without a password file.



=head2 mh update 01/30/99 version 1.30

Version 1.30 was just uploaded to http://www.isl.net/~winter/house/programs  

Changes include:

- Linux serial port support!  Thanks to Joe Doss for creating SerialPort_Linux.
I tested both a CM11 (i.e. activehome) and weeder X10 interface on it.  Works great!

- Added a simple bin/configure file, to help with a linux install (See readme.html).

- Fixed case names on various lib modules.  Now, all the files in the bin directory
should work OK stand alone on linux (and windows if perl is installed).

- Change the zip so it creates an mh directory, so you can unzip right from a root drive/directory.

- Added the API.pm to the sit lib so that the uncompiled version will run 'out of the box' on 
windows with just the standard perl distribution installed.

- The web top 10 list works again.

- On windows, if you don't want/use voice recognitions, mh -voice_cmd 0  will now cause perl
to load without those pesky 'DDE' and 'OleMain' ghost windows.

A note to potential linux users.  The festival TTS engine works good, but it sucks up about 20-30 meg (it forks once).
So, there can be a fair amount of latency with when speaking longer strings, on a 32 meg machine.  


=head2 mh update 01/30/99 version 1.29

Version 1.29 was just uploaded to http://www.isl.net/~winter/house/programs  

In addition to the bug fixes posted a few days ago, here is the list of fixes/updates:

- get_tv_grid now has a better index, so you can navigate different hours/days.  You will
need to run get_tv_grid -days 7 -hour all  to get a full weeks worth of data. 

- telnet.pl was updated with an example of how you can set a wakeup time item.

- Startup time for the windows mh.exe was improved.

- mh.ini and mh.private.ini are now reloaded on a reload command.

- A new file, internet_logon.pl, demonstrates how to do windows auto-dialing/auto-updating of net data.

- The set_clock now uses a simple socket call to get time from a server.  Charles, if this still does not work
behind your firewall, see if you can connect with: telnet time-a.timefreq.bldrdoc.gov 14    That should work unless your 
firewall is blocking port 14.

- internet_ip_update.pl can now update the TZO dynamic IP server and it can upload your current dynamic IP address to a web
page (see http://www.isl.net/~winter/online for an example of what that page looks like).

- Fixed a bug with get_weather had a bug where it would not return the current weather conditions.

- Created 'house' and 'speak' shells for unix users.

- mh.html has a bit more documentaion on items and their methods.

- deep_though.pl has been re-worked.  It no longer relies on a DOS program, so now linux dudes can revel in
'Deep thoughts for the day'



=head2 mh update 01/24/99 version 1.27

Version 1.27 was just uploaded to http://www.isl.net/~winter/house/programs.  Lots of new tricks and changes:

- linux support!  Except for a few minor things like VR and serial port IO :)  Still, there should be enough function on a linux to be useful.
TTS (with the Festival speech engine installed) and all the internet, telnet, and web function works.
Details on installation are in the README.HTML and limitations are documented at the bottom of mh.html

- new function: get_weather.  Gets current conditions and/or forecast data from the net.  
See 'Get internet weather data' in the test/internet_data.pl file and set the city and state entries in mh.ini

- new function: get_tv_grid.  Gets tv programing from clicktv.com.  You can go to their website and personalize
your tv grid to your location and preferences, then set the clicktv_id in mh.ini.   Now use the web interface
to drive the test/tv_grid.pl code to program tv reminders and/or vcr programing.  It needs a bit more work
in navigating through different days, but I its a start.

- added a Generic_Item object, for storeing arbitrary data.  An example is in tv_grid.pl

- added test/internet_ip_update.pl  This is an example of how you can update an 'Dynamic IP address' server with
your current dynamic IP address.  This one is for the postmodem.com DIPS service, but I think we could 
also code one 2 other popular servers: tzo.com  and dyn.ml.org.

- quite a few changes in mh.ini, so if you have your own mh.ini, you will probably want to put your changes in 
a mh.private.ini file, which has precedence.

- a bit more documention, especially on windows VR and TTS, in mh.html

- Probably other important changes I have forgotten to take notes on :)


=head2 mh update 01/13/99 version 1.21

I just uploaded version 1.21 of mh to 

- fixed a bug where many of the commands would not work if the VR (Voice Recognition) engine was not installed.  Now everything should work with or without VR.

- added the option for mh to be a socket port server.  It defaults to monitoring the telnet port (23).  If you are running telnet.pl (in the test directory), you should be able to do a 'telnet localhost' and run any voice command (as listed on by the web interface), in addition to 'say phrase/file' and 'display phrase/file'.  Thanks to Brian for this idea!  

Keep those ideas coming and we will soon have an automation engine capable of running the country!  Someone needs to :) 


Near term todos:

- A socket client option, so mh can start a socket communication (in addition to the server option that was just added).

- Add authentication, to optionally limit telnet and web interaction to 'good guys'

- More documentation

- Modify code so it can also run on Linux with the Festival TTS engine.  Any linux users out there want to test it?


=head2 mh update 01/08/99 version 1.18

I just uploaded version 1.18 of hh.  Changes include:

- Fixed the run command option.  For example, this dos command should work now:

    house speak hi there

- Started documenting!  There is now a \mh\docs\mh.html file.  It is pretty sketchy for now, but it should grow pretty quick in the next week or two.


=head2 mh update 01/06/99 version 1.17

I just uploaded version 1.17 of mh.  Changes include:

- 5% increments in bright dim (instead of 10%)

- fixed a memory leak introduced in the previous version

- added run_voice_cmd and allow $voice_item set method

- allowed time offsets in time_greater_than/less_than

- minor changes to the web interface

